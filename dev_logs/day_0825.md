## mk unittest

***! 주의사항 : 과도한 API 호출 시 서비스 자체에 영향 줌.***

### 우선 예상되는 테스트들
- 공통
    - access_token 활성화 여부
    - request ig_user_id
     
- 미디어 계정
    - API요청 성공 여부
        - requesturl
        - request target_name
        - request fields
- 해시태그
    - hashtag문자 -> id반환여부
    - API요청 성공 여부
        - request url
        - request target_id
        - request fields

### 테스트 범위
- utils.py
- lambda_accounts.py
- lambda_hashtags.py

- - - 

## 코드 별 체크사항

### uitls.py
- check_fields()
    - 하나의 레코드 데이터 넣고 리턴값 점검
        - str, int, url, timestamp 형식
    - 잘못된 값의 레코드 넣고 리턴값 점검
        - str, int, url, timestamp 형식
    - err_count가 0인지 체크. (에러X)
    - err_count 각 에러 발생 체크 (에러상황)
        - type error
        - url format error
        - timestamp format error


### lambda_accounts.py
- API 요청, 응답 정상 체크

### lambda_hashtags.py
- API 요청, 응답 정상 체크

- - -

## test코드
- test_access_token.py
    - access_token 유효성, 만료기간 체크
- test_api_request.py
    - account, hashtag 별 API요청/응답, 필드 체크
- test_function.py
    - utils.check_fields 함수 체크

- - -

### 그 외 변경사항
- 에러 카운트 필드 추가
    - 필수필드 (id) 누락   
      `[required field does not exist]`
    - 예상된 필드 유무 체크   
      `[not found field]`
    - id 값 형식 체크 `\d+`   
      `[id format error]`
    - media_product_type 도메인 체크 [`AD`, `FEED`, `STORY`, `REELS`]   
      `[media_product_type domain not allowed]`
    - media_type 도메인 체크 [`IMAGE`, `VIDEO`, `CAROUSEL_ALBUM`]   
      `[media_type domain not allowed]`